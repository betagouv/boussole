-# coding: utf-8

.l-container-wide
  .l-content
    %section.profile-list
      %h1.profile-list-header= t('.heading', rhizome: t("rhizomes.#{rhizome.()}"))
      %hr

      .profile-list-new
        = link_to(t('.new'), new_agents_service_offering_path, class: 'button-primary', role: 'link')

      .profile-list-content
        %table
          %thead
            %tr
              %th= ServiceOffering.human_attribute_name(:title)
              %th= ServiceOffering.human_attribute_name(:public_service)
              %th= ServiceOffering.human_attribute_name(:social_right)
              %th
              %th
              %th

          %tbody
            - @service_offerings.each do |service_offering|
              %tr
                %td= service_offering.title
                %td= service_offering.public_service_title
                %td= service_offering.social_right_name

                = render(partial: 'blocks/button_groups/agents_index', locals: { model: service_offering })

                %td
                  - if feature?(:define_target_public)

                  - target_public = TargetPublicDecorator.(service_offering.target_public)

                    - if policy(target_public).define?
                      = link_to t('.target_public.show'),
                                agents_service_offering_target_public_path(service_offering),
                                class: 'button-info',
                                role: 'link'

                    - else
                      .profile-form-no-action




